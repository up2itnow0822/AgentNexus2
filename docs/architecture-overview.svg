<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 720" fill="none">
  <style>
    .title { font: bold 26px 'Arial', sans-serif; fill: #0f172a; }
    .label { font: bold 18px 'Arial', sans-serif; fill: #0f172a; }
    .text { font: 16px 'Arial', sans-serif; fill: #111827; }
    .box { fill: #e0f2fe; stroke: #0284c7; stroke-width: 2; rx: 12; }
    .accent { fill: #ecfdf3; stroke: #16a34a; stroke-width: 2; rx: 12; }
    .chain { fill: #fff7ed; stroke: #ea580c; stroke-width: 2; rx: 12; }
    .arrow { stroke: #0f172a; stroke-width: 2; marker-end: url(#arrowhead); }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#0f172a" />
    </marker>
  </defs>

  <text x="420" y="40" class="title">AgentNexus — Annotated Architecture</text>

  <!-- User / Wallet Layer -->
  <rect x="60" y="80" width="260" height="120" class="accent" />
  <text x="80" y="115" class="label">User Wallet</text>
  <text x="80" y="145" class="text">Base L2 wallet</text>
  <text x="80" y="170" class="text">Ledger / Browser extension</text>

  <!-- Frontend Layer -->
  <rect x="360" y="80" width="300" height="120" class="box" />
  <text x="380" y="115" class="label">Next.js Frontend</text>
  <text x="380" y="145" class="text">wagmi + RainbowKit</text>
  <text x="380" y="170" class="text">Marketplace + x402 paywall</text>

  <!-- Backend Layer -->
  <rect x="720" y="80" width="360" height="180" class="box" />
  <text x="740" y="115" class="label">Node/Express Backend</text>
  <text x="740" y="145" class="text">Prisma + Postgres</text>
  <text x="740" y="170" class="text">x402 middleware + CCTP relayer</text>
  <text x="740" y="195" class="text">WebSocket logs + audit events</text>

  <!-- Smart Contract Layer -->
  <rect x="60" y="270" width="360" height="200" class="chain" />
  <text x="80" y="305" class="label">Base L2 Contracts</text>
  <text x="80" y="335" class="text">AgentNexusEntitlements</text>
  <text x="80" y="360" class="text">AgentNexusEscrow</text>
  <text x="80" y="385" class="text">AgentNexusCctpReceiver</text>
  <text x="80" y="410" class="text">ERC-4337 Smart Accounts</text>

  <!-- Execution Layer -->
  <rect x="480" y="300" width="300" height="170" class="box" />
  <text x="500" y="335" class="label">Agent Runtime</text>
  <text x="500" y="365" class="text">Docker-isolated agents</text>
  <text x="500" y="390" class="text">Resource caps + seccomp</text>
  <text x="500" y="415" class="text">Streaming logs & metrics</text>

  <!-- Payment Rails -->
  <rect x="820" y="320" width="260" height="150" class="accent" />
  <text x="840" y="355" class="label">Payments</text>
  <text x="840" y="385" class="text">x402 USDC Pay-per-request</text>
  <text x="840" y="410" class="text">Circle CCTP (Arb/OP → Base)</text>
  <text x="840" y="435" class="text">Receiver credits entitlements</text>

  <!-- Data arrows -->
  <line x1="320" y1="140" x2="360" y2="140" class="arrow" />
  <line x1="660" y1="140" x2="720" y2="140" class="arrow" />
  <line x1="240" y1="200" x2="240" y2="270" class="arrow" />
  <line x1="510" y1="200" x2="360" y2="270" class="arrow" />
  <line x1="900" y1="260" x2="900" y2="320" class="arrow" />
  <line x1="720" y1="360" x2="820" y2="360" class="arrow" />
  <line x1="540" y1="470" x2="230" y2="470" class="arrow" />

  <!-- Notes -->
  <text x="80" y="470" class="text">On-chain entitlements gate execution</text>
  <text x="820" y="500" class="text">CCTP proofs minted on Base before credit</text>
</svg>
